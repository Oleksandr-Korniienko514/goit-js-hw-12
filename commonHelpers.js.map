{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '45213588-1347783919d0c1f7f1631233d';\nconst STATUS_BAD_REQUEST = 400;\n\nexport async function getImages(query, page) {\n  const params = {\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    per_page: 15,\n    page: page,\n  };\n\n  try {\n    const response = await axios.get(BASE_URL, { params: params });\n\n   \n    if (response.data && Array.isArray(response.data.hits)) {\n      return response.data;\n    } else {\n      iziToast.error({\n        title: 'Error',\n        message: 'Unexpected API response format.',\n        position: 'topRight',\n      });\n      return { hits: [] };  \n    }\n  } catch (error) {\n   \n    iziToast.error({\n      title: 'Request error',\n      message: `Something went wrong: ${error.message}`,\n      position: 'topRight',\n    });\n\n    \n    return { hits: [] };\n  }\n}\n","const gallery = document.querySelector('.gallery');\n\nfunction imgTemplate({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `<li class=\"gallery-card\"> \n    <figure class=\"image-container\">\n      <a href=\"${largeImageURL}\">\n        <img class=\"image-thumbnail\" src=\"${webformatURL}\" alt=\"${tags}\" title=\"\" width=\"360\" height=\"200\"/>\n      </a>\n      <figcaption class=\"image-details\">\n        <ul class=\"details-list\">\n          <li class=\"details-item\">Likes<p class=\"details-count\">${likes}</p></li>\n          <li class=\"details-item\">Views<p class=\"details-count\">${views}</p></li>\n          <li class=\"details-item\">Comments<p class=\"details-count\">${comments}</p></li>\n          <li class=\"details-item\">Downloads<p class=\"details-count\">${downloads}</p></li>\n        </ul>\n      </figcaption>\n    </figure>\n  </li>`;\n}\n\n\nfunction imgsTemplate(arr) {\n  return arr.map(imgTemplate).join('');\n}\n\nexport function renderImg(hits) {\n  const markup = imgsTemplate(hits);\n  gallery.innerHTML += markup;\n}","import { getImages } from './js/pixabay-api';\nimport { renderImg } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst refs = {\n  btnSearch: document.querySelector('.btn-search'),\n  form: document.querySelector('.form'),\n  input: document.querySelector('input'),\n  ul: document.querySelector('ul.gallery'),\n  loadBtn: document.querySelector('.load-btn'),\n};\n\nlet page = 1;\nlet query = '';\nlet gallery = new SimpleLightbox('.gallery a');\nrefs.loadBtn.classList.add('hiddenBtn');\nrefs.form.addEventListener('submit', async e => {\n  try {\n    refs.loadBtn.classList.remove('hiddenBtn');\n    e.preventDefault();\n    query = refs.input.value.trim();\n    if (query === '') {\n      iziToast.error({\n        title: 'Error',\n        message: 'Please enter a search query',\n      });\n      return;\n    }\n\n    refs.ul.innerHTML = '';\n    page = 1;\n    startLoader();\n    const result = await getImages(query, page);\n    stopLoader();\n\n    if (result.hits.length === 0) {\n      iziToast.error({\n        title: 'No results',\n        message: 'No images found. Please try a different query.',\n      });\n      refs.loadBtn.classList.add('hiddenBtn');\n    } else {\n      renderImg(result.hits);\n      gallery.refresh();\n      if (result.hits.length < 15) {\n        refs.loadBtn.classList.add('hiddenBtn');\n      } else {\n        refs.loadBtn.classList.remove('hiddenBtn');\n      }\n    }\n  } catch (error) {\n    stopLoader();\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong.',\n    });\n  }\n});\n\nrefs.loadBtn.addEventListener('click', async () => {\n  page += 1;\n   console.log('Page incremented:', page);\n  startLoader();\n  const result = await getImages(query, page);\n  stopLoader();\n\n  if (result.hits.length === 0) {\n    refs.loadBtn.classList.add('hiddenBtn');\n    iziToast.info({\n      title: 'No more results',\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n  } else {\n    renderImg(result.hits);\n    gallery.refresh();\n    if (result.hits.length < 15) {\n      refs.loadBtn.classList.add('hiddenBtn');\n      iziToast.info({\n        title: 'No more results',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n  }\n  scrollToEnd();\n});\n\nfunction scrollToEnd() {\n  window.scrollTo({\n    top: document.body.scrollHeight,\n    behavior: 'smooth',\n  });\n}\n\nfunction startLoader() {\n  refs.loadBtn.insertAdjacentHTML(\n    'afterend',\n    '<div id=\"loader\" class=\"loader\"></div>'\n  );\n}\nfunction stopLoader() {\n  document.querySelector('.loader').remove();\n}\n\n\n"],"names":["BASE_URL","API_KEY","getImages","query","page","params","response","axios","iziToast","error","gallery","imgTemplate","webformatURL","largeImageURL","tags","likes","views","comments","downloads","imgsTemplate","arr","renderImg","hits","markup","refs","SimpleLightbox","e","startLoader","result","stopLoader","scrollToEnd"],"mappings":"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"}